% thesislayout.tex
%
% Author:  Tim Steenvoorden
% Changed: 30 Jan 2012
%
\startenvironment thesislayout
\environment      documentdefinitions

% ------------------------------------------------------------------------------
% Language
% ------------------------------------------------------------------------------

\mainlanguage[nl]

% ------------------------------------------------------------------------------
% Typeface
% ------------------------------------------------------------------------------

\startmode[*mkiv]
  \usemodule[simplefonts]

  \setmainfont[Aldus LT Std]
    [features=oldstyle]
  \setmathfont[palatino]

  \definebodyfontenvironment[48pt]

  \setupbodyfont[11pt]
\stopmode

\startmode[*mkii]
  \definefontfeature[default][default]
    [onum=yes]
  \definefontfeature[smallcaps][smallcaps]
    [onum=yes]

  %\definefontfeature[hanging][default]
    %[protrusion=pure]

  \definetypeface[aldus][rm][Xserif][Aldus LT Std]
  \definetypeface[aldus][mm][math][palatino]

  \setupbodyfont[aldus,11pt]

  %\setupalign[hanging]
\stopmode

\setupcapitals
  [sc=yes]

% ------------------------------------------------------------------------------
% Drawings & Color
% ------------------------------------------------------------------------------

\startmode[quick]
  \definetyping[tikzpicture]
    [style={\tfx\tt\setupinterlinespace[small]},
     space=fixed]
\stopmode

\startnotmode[quick]
  \usemodule[tikz]

  \setuptikz
    [boxed=yes]

  % Every:
  \setuptikzstyle[every picture]
    [>=stealth,font=\tfx]
  \setuptikzstyle[every node]
    [black]

  % Paths:
  \setuptikzstyle[axis lines]
    [->,thick,gray]
  \setuptikzstyle[screen lines]
    [thick]
  \setuptikzstyle[lines]
    [orange]
  \setuptikzstyle[alt lines]
    [light orange]
  \setuptikzstyle[emph lines]
    [very thick,orange]
  \setuptikzstyle[slit]
    [white,radius=0.5]

  % Nodes:
  \setuptikzstyle[apparatus]
    [rectangle,inner sep=2pt]
  \setuptikzstyle[source]
    [fill,apparatus]
  \setuptikzstyle[detector]
    [draw,apparatus]
  %\setuptikzstyle[slit]
    %[fill,white,circle]
\stopnotmode

\startmode[*mkiv]
  \definecolor[orange]
    [h=30,s=1,v=1]
  \definecolor[mid orange]
    [h=30,s=0.66,v=1]
  \definecolor[light orange]
    [h=30,s=0.33,v=1]

  %\colorlet{mid orange}{orange!66}
  %\colorlet{light orange}{orange!33}
\stopmode

\startmode[*mkii]
  \setupcolors
    [state=start]
  \definecolor[light orange]
    [r=0.996,g=0.800,b=0.620]
\stopmode

% ------------------------------------------------------------------------------
% Pagelayout
% ------------------------------------------------------------------------------

\setuppapersize[A4][A4]

\setuplayout
  [width=middle,
   backspace=26mm,
   cutspace=42mm,
   height=middle,
   topspace=26mm,
   bottomspace=\dimexpr(42mm-3\lineheight),
   margin=26mm,
   header=\lineheight,
   headerdistance=\lineheight,
   footerdistance=2\lineheight,
   footer=\lineheight]

\setuppagenumbering
  [alternative=doublesided,
   location=]% See \setupheader/footertexts

\setupheader
  [state=empty,
   style=\sc]
\setupfooter
  [style=\sc]

\setupheadertexts
  [][section]
  [chapter][]
\setupfootertexts
  [][pagenumber]
  [pagenumber][]

\setupmargindata[inmargin]
  [location=outer,
   style=\it]

\startmode[*mkiv]
  \setupmarginframed[inmargin]
    [align=inner]
\stopmode

% ------------------------------------------------------------------------------
% Text
% ------------------------------------------------------------------------------

\setupindenting[yes,medium]

\setupblank[line]

\setupurl
  [style=\it]

\setupnote[footnote]
  [numbercommand=]% We don't want subscripts at the bottom of the page.
\setupnotation[footnote]
  [alternative=left,
   distance=0.5em]

\setupformulas
  [align=right,
   margin=yes,
   spacebefore=medium,
   indentnext=auto]

%\setupsynonyms[abbreviation]
  %[synonymstyle=\sc]

\setupframedtexts
  [width=local,
   %offset=0.5ex,
   frame=off,
   background=color,
   backgroundcolor=light orange,
   before={\blank[halfline]},
   after={\blank[halfline]}]
   %top={\blank[halfline]},
   %bottom={\blank[halfline]}]

\defineframedtext[intermezzo]
  [style=small,
   width=2\marginwidth]

% ------------------------------------------------------------------------------
% Definitions
% ------------------------------------------------------------------------------

\setupitemgroup[itemize][each]
  [packed]
  [headstyle=\it,
   color=orange,
   before=,
   after=]

\setupquote
  [location=margin,
   leftmargin=standard,
   style=\it]

\defineenumeration[postulate]
  [text={Postulaat},
   headstyle=\sc,
   headcolor=orange,
   alternative=serried,%*mkiv
   location=serried,%*mkii
   indentnext=auto,
   width=broad,
   before=\startframedtext,
   after=\stopframedtext]

% ------------------------------------------------------------------------------
% Heads
% ------------------------------------------------------------------------------

\setuphead[chapter]
  [alternative=inmargin,
   style=\tfb,
   color=orange,
   numberstyle={\switchtobodyfont[48pt]},
   numbercolor=light orange,
   after={\blank\blank}]
\setuphead[section]
  [alternative=margin,
   style=\sc,
   color=orange,
   before=\blank,
   after=\blank]
\setuphead[subsection]
  [textstyle=\it,
   aligntitle=float]

% ------------------------------------------------------------------------------
% Lists & Registers
% ------------------------------------------------------------------------------

\setupcombinedlist[content]
  [alternative=a,
   level=section,
   pagestyle=\quad\it]

% ------------------------------------------------------------------------------
% Floats
% ------------------------------------------------------------------------------

\setupfloat[intermezzo]
  [default={outermargin,none},
   maxwidth=\marginwidth]

\setupcaptions
  [headstyle=\sc,
   headcolor=orange,
   minwidth=\dimexpr(\textwidth-3em)]

\setuptabulate
  [rulethickness=0.8pt]

% ------------------------------------------------------------------------------
% Sectionblocks
% ------------------------------------------------------------------------------

\startsectionblockenvironment[frontpart]
  \setuppagenumbering
    [conversion=romannumerals]
\stopsectionblockenvironment

\startsectionblockenvironment[bodypart]
  \writebetweenlist[chapter]{\blank}
  \setuppagenumber
    [number=1]
\stopsectionblockenvironment

\startsectionblockenvironment[appendix]
  \writebetweenlist[chapter]{\blank}
\stopsectionblockenvironment

\startsectionblockenvironment[backpart]
  \writebetweenlist[chapter]{\blank}
\stopsectionblockenvironment

% ------------------------------------------------------------------------------
% Publications
% ------------------------------------------------------------------------------

\setupbibtex
  [database=bronnen,
   sort=author]

\setuppublications
  [alternative=ams]

% ------------------------------------------------------------------------------
% Synonyms
% ------------------------------------------------------------------------------

\abbreviation{LHS}{Left Hand Side}
\abbreviation{RHS}{Right Hand Side}
\abbreviation{LHC}{Large Hadron Collider}

\abbreviation{QED}{Quantum Electro Dynamics}
\abbreviation{CALTECH}{California Institute of Technology}

% ------------------------------------------------------------------------------
% Modes
% ------------------------------------------------------------------------------

\startmode[correction]
  \version[concept]
  \setupinterlinespace[big]
\stopmode

\startmode[draft]
  \version[temporary]
\stopmode

\stopenvironment

% vim: ts=2 sw=2 et spell

